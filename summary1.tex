\documentclass[a4paper]{article}
\usepackage{indentfirst}
\usepackage{amsmath,amsthm,amssymb}
\usepackage{fancybox}
\usepackage{fancyvrb}
%\usepackage{minted}
\usepackage{color}
\usepackage{makeidx}
\usepackage{xeCJK}
%\setCJKmainfont[BoldFont={Adobe Heiti Std}, ItalicFont={AR PL New Kai}]{Adobe Song Std}
\setCJKmainfont[BoldFont={Adobe Heiti Std}, ItalicFont={Adobe Kaiti Std}]{Adobe Song Std}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{array}
%\usepackage{gnuplot-lua-tikz}
\usepackage{cite}
\usepackage{url}
\usepackage{enumerate}
\geometry{left=1.5cm, right=1.5cm, top=1.5cm, bottom=1.5cm}
\usepackage{wrapfig}
%\usepackage{lettrine}
\usepackage{abstract}
\usepackage{subcaption}

% THEOREMS -------------------------------------------------------
\newtheorem{Thm}{Theorem}
\newtheorem{Cor}[Thm]{Corollary}
\newtheorem{Conj}[Thm]{Conjecture}
\newtheorem{Lem}[Thm]{Lemma}
\newtheorem{Prop}[Thm]{Proposition}
\newtheorem{Prob}{Problem}
\newtheorem{Exam}{Example}
\newtheorem{Def}[Thm]{Definition}
\newtheorem{Rem}[Thm]{Remark}
\newtheorem{Not}[Thm]{Notation}
\newtheorem*{Sol}{Solution}

% MATH -----------------------------------------------------------
\newcommand{\norm}[1]{\left\Vert#1\right\Vert}
\newcommand{\abs}[1]{\left\vert#1\right\vert}
\newcommand{\set}[1]{\left\{#1\right\}}
\newcommand{\Real}{\mathbb R}
\newcommand{\eps}{\varepsilon}
\newcommand{\To}{\longrightarrow}
\newcommand{\BX}{\mathbf{B}(X)}
\newcommand{\A}{\mathcal{A}}
\newcommand{\CommentS}[1]{}
% CODE ----------------------------------------------------------
\newcommand{\PltImg}[1]{
\begin{center}
\input{#1}
\end{center}
}

\newenvironment{code}%
{\vglue 5pt \VerbatimEnvironment\begin{Sbox}\begin{minipage}{0.9\textwidth}\begin{small}\begin{Verbatim}}%
{\end{Verbatim}\end{small}\end{minipage}\end{Sbox}\setlength{\shadowsize}{2pt}\shadowbox{\TheSbox}\vglue 5pt}


\usepackage{pgf}
\usepackage{tikz}
\usetikzlibrary{arrows}
\usetikzlibrary{shapes}
\tikzstyle{weight} = [font=\small]
\tikzstyle{edge} = [draw,thick,->,every node/.style={font=\sffamily\small}]
\tikzstyle{vertex}=[circle,fill=blue!20,minimum size=20pt,inner sep=0pt]
%\usetikzlibrary{automata}
%\usepackage[latin1]{inputenc}
\usepackage{verbatim}
\usepackage{listings}
%\usepackage{algorithmic} %old version; we can use algorithmicx instead
\usepackage{algorithm}
\usepackage[noend]{algpseudocode} %for pseudo code, include algorithmicsx automatically

\lstdefinelanguage{Smalltalk}{
  morekeywords={self,super,true,false,nil,thisContext}, % This is overkill
  morestring=[d]',
  morecomment=[s]{"}{"},
  alsoletter={\#:},
  escapechar={!},
  literate=
    {BANG}{!}1
    {UNDERSCORE}{\_}1
    {\\st}{Smalltalk}9 % convenience -- in case \st occurs in code
    % {'}{{\textquotesingle}}1 % replaced by upquote=true in \lstset
    {_}{{$\leftarrow$}}1
    {>>>}{{\sep}}1
    {^}{{$\uparrow$}}1
    {~}{{$\sim$}}1
    {-}{{\sf -\hspace{-0.13em}-}}1  % the goal is to make - the same width as +
    %{+}{\raisebox{0.08ex}{+}}1		% and to raise + off the baseline to match -
    {-->}{{\quad$\longrightarrow$\quad}}3
	, % Don't forget the comma at the end!
  tabsize=2
}[keywords,comments,strings]

\lstloadlanguages{C++, Lisp, Haskell, Python, Smalltalk, Mathematica} %, Java,bash,Gnuplot,make,Matlab,PHP,Prolog,R,Ruby,sh,SQL,TeX,XML}

%--------------Now the document begins------------------

\title{Approximate Counting Edge Covers via Correlation Decay}
\begin{document}
\maketitle
\begin{abstract}
	An edge cover for an undirected graph is the set of edges covering every vertices in the graph.
	We demonstrate the correlation decay property of sampling edge covers in general graphs, and present a PTAS for the approximate counting edge covers in general graphs.
\end{abstract}
\section{Introduction}
Since we are only dealing with undirected graph, we will simply write graph to refer to undirected graph.
And for notational convenience we only consider graphs with at least $6$ vertices.

TBA.
\section{Preliminaries}
\subsection{Definitions}
\begin{Def}
	A dangling edge $e=(u,\_)$ of a graph is such singleton edge with only one end-point vertex $u$, as shown in the Figure \ref{fig:G}.

	A completely dangling edge $e=(\_, \_)$ of a graph is such edge with no end-point vertex. Note that a completely dangling edge is not a dangling edge.

	A graph with at least one dangling edge is called a non-trivial dangling graph.
	
	Here's the list of configurations of trivial dangling graphs:(FIXME DRAW FIGURES) 
	\begin{itemize}
		\item  $E=\emptyset$.
		\item $V=\emptyset$.
		\item (FIXME MAYBE NOT NEEDED \footnote{check if each $G_i$ is still dangling graphs, either trivial or not}) Graphs containing only a vertex with only dangling edges.
		\item (FIXME MAYBE NOT NEEDED \footnote{check if each $G_i$ is still dangling graphs, either trivial or not}) Graphs containing only completely dangling edges.
	\end{itemize}
\end{Def}

Other definitions TBA.
\subsection{Notations}
For a graph $G=(V,E)$ and edge $e=(u,v) \in E$, let $G-e \triangleq (V, E-e)$, and $G-e-u-v \triangleq (V-\set{u,v}, E-e)$.

For example, given a degree-3 vertex $u$ with dangling edge $e$, the result of $G-e-u$ is shown in Figure \ref{fig:G-e-u}.
FIXME: also define $G-e-u$.

\begin{figure}[htp]
	\begin{subfigure}[b]{0.45\textwidth}
		\centering
		\setlength{\unitlength}{1mm}
		\begin{picture}(20,30)
			\put(0,0){\circle*{10}}
			\put(0,0){\line(1,1){10}}
			\put(20,0){\circle*{10}}
			\put(20,0){\line(-1,1){10}}
			\put(10,10){\circle*{10}}
			\put(10,10){\line(0,1){10}}
			\put(14,10){$u$}
			\put(8,15){$e$}
			\put(2,6){$e_1$}
			\put(15,5){$e_2$}
		\end{picture}
		\caption{$G$}
		\label{fig:G}
	\end{subfigure}
	\hfill
	\begin{subfigure}[b]{0.45\textwidth}
		\centering
		\setlength{\unitlength}{1mm}
		\begin{picture}(20,20)
			\put(0,0){\circle*{10}}
			\put(0,0){\line(0,1){10}}
			\put(20,0){\circle*{10}}
			\put(20,0){\line(0,1){10}}
			\put(2,6){$e_1$}
			\put(15,6){$e_2$}
		\end{picture}
		\caption{$G-e-u$}
		\label{fig:G-e-u}
	\end{subfigure}
	\caption{Dangling graphs examples.}
\end{figure}

We use $0$ to denote scalar value $0$, and $\mathbf{0}$ to denote vector value 0, and $\set{e_i}_{i=1}^{d}$ denote the $d$-dimensional vector with $i$-th coordinate being $e_i$, so $\set{e_i} = \mathbf{0}$ means $\forall i, e_i = 0$.

\section{The Recursion}

Given a graph $G=(V,E)$ with edge $e$,  now define $P(G, e)$ to be the probability over all edge coverings of $G$ that edge $e$ is not chosen, namely
\begin{equation}
	P(G, e) \triangleq \mathbb{P} (\textrm{edge $e$ is not chosen})
	\label{defpge}
\end{equation}

Now we're ready for writing out the recursion.
\subsection{Nontrivial Dangling Graphs}
\begin{Prop}
For nontrivial dangling graph $G=(V,E)$ with a dangling edge $e=(u,\_)$, denote the $d$ %non-dangling?
edges incident with $u$ except $e$ as $e_1, e_2, \ldots, e_d$,
let $G_i = G - e - u - \sum_{k=1}^{i-1} e_k$ (specifically, $G_1 = G - e - u$), so we have%. $P(G,e)$ satisfies
	\begin{equation}
		P(G, e) = \frac{1-\prod_{i=1}^d P(G_i, e_i)}{2 - \prod_{i=1}^d P(G_i, e_i)} = \frac{1}{2} - \frac{0.5 \prod_{i=1}^d P(G_i, e_i)}{2 - \prod_{i=1}^d P(G_i, e_i)}
		\label{propp3rg}
	\end{equation}
\end{Prop}
\begin{proof}
	For $\alpha \in \set{0,1}^d$, let $E_{\alpha}$ be the set of edge coverings in $G-e-u$ such that its restriction onto $\set{e_i}_{i=1}^{d}$ is consistent with $\alpha$, denote $Z_{\alpha} = \norm{E_{\alpha}}$, and $Z = \sum_{\alpha \in \set{0,1}^d} Z_{\alpha}$. % \triangleq \set{X : X\subseteq E, $

		Also note that counting edge coverings with restriction $\alpha$ is the same in either $G$, $G-e$, or $G-e-u$, so it's enough to work with $G-e-u$.
	\begin{align*}
		P(G,e) = & \frac{\textrm{number of solutions with $e$ not chosen}}{\textrm{total number of solutions}} \\
		=& \frac{\sum_{\alpha \in \set{0,1}^d, \alpha \neq \mathbf{0}} Z_{\alpha} }{ Z_{\mathbf{0}} + 2 \sum_{\alpha \in \set{0,1}^d, \alpha \neq \mathbf{0}} Z_{\alpha}} \\
		=& \frac{1 - \frac{Z_{\mathbf{0}}}{Z}}{ 2 - \frac{Z_{\mathbf{0}}}{Z}}.
	\end{align*}

	Now consider the term $\frac{Z_{\mathbf{0}}}{Z}$, it says the probability over all solutions in $G-e-u$ that none of $\set{e_i}_{i=1}^{d}$ is picked, so
	\begin{align*}
		\frac{Z_{\mathbf{0}}}{Z}=\mathbb{P} \left( \set{e_i} = \mathbf{0}\right) = \mathbb{P} (e_1 = 0) \prod_{i=2}^d \mathbb{P} \left(e_i = 0 \mid \set{e_j}_{j=1}^{i-1} = \mathbf{0}\right) = \prod_{i=1}^d P(G_i, e_i).
	\end{align*}

	Hence concludes the proof.
	
\end{proof}

\begin{Cor}
	For nontrivial dangling graphs,
	\[P(G, e) \leq \frac{1}{2}\]
\end{Cor}

In fact this corrolary comes no surprise, because by looking combinatorially, picking a dangling edge should definitely yields more solutions.

As a side note, note that $\forall i, G_i$ is a dangling graph (maybe trivial dangling graphs though), although $e_i$ can be a completely dangling edge.


\subsection{Trivial Dangling Graphs}
TBA.

\subsection{General Graphs}
Here we focus on graphs with no dangling edges and no completely dangling edges, as trivial dangling graphs is just trivial base cases, and nontrivial dangling graphs has been handled in the previous section.

Here's a typical example of converting a general graph to dangling graphs.
Say we picked $e=(u,v)$ out of any general graph as in figure \ref{fig:generalG}, again we want to write the recursion of $P(G,e)$ for $G$.
By definition we have 
\begin{equation}
	P(G,e) = \frac{(\textrm{number of solutions in $G-e$})}{\textrm{(number of solutions in $G-e$) + (number of solutions in $G-e-u-v$)}}.
\end{equation}


	For $\alpha \in \set{0,1}^{d_1}, \beta \in \set{0,1}^{d_2}$, let $E_{\alpha,\beta}^G$ be the set of edge coverings in $G$ such that its restriction to $\set{e_i}_{i=1}^{d_1}$ is consistent with $\alpha$, and restriction to $\set{f_i}_{i=1}^{d_2}$ is consistent with $\beta$,  where $\set{e_i}$ is the set of edges incident with vertex $u$ except $e$, and $\set{f_i}$ is the set of edges incident with vertex $v$ except $e$, and $d_1 = \norm{\set{e_i}}, d_2 = \norm{\set{f_i}}$.

	Denote $Z_{\alpha, \beta}^G \triangleq \norm{E_{\alpha, \beta}^G}$, $G_1 \triangleq G-e, G_2 \triangleq G-e-u-v$, $C_1$ be the number of solutions in $G_1$, $C_2$ be the number of solutions in $G_2$, now we have
\begin{Prop}
\[C_1 = \sum_{\alpha \neq \mathbf{0}, \beta \neq \mathbf{0}} Z_{\alpha, \beta}^{G_1} = \sum_{\alpha \neq \mathbf{0}, \beta \neq \mathbf{0}} Z_{\alpha, \beta}^{G_2}\]
\[C_2 = \sum_{\alpha , \beta} Z_{\alpha, \beta}^{G_2}\]
And denote $Z = \sum_{\alpha , \beta} Z_{\alpha, \beta}^{G_2}$, we also have,
\[P(G,e) = \frac{\sum_{\alpha \neq \mathbf{0}, \beta \neq \mathbf{0}} Z_{\alpha, \beta}^{G_2}}{Z + \sum_{\alpha \neq \mathbf{0}, \beta \neq \mathbf{0}} Z_{\alpha, \beta}^{G_2}} = 1 - \frac{1}{2 + \mathbb{P}\left( \alpha = 0, \beta = 0 \right) - \mathbb{P} \left( \alpha = 0 \right) - \mathbb{P} \left( \beta = 0 \right)}\]
\end{Prop}


\begin{figure}[htp]
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\setlength{\unitlength}{1mm}
		\begin{picture}(20,30)
			\put(0,0){\circle*{10}}
			\put(0,0){\line(1,1){10}}
			\put(20,0){\circle*{10}}
			\put(20,0){\line(-1,1){10}}
			\put(10,10){\circle*{10}}
			\put(10,10){\line(0,1){10}}
			\put(10,20){\circle*{10}}
			\put(10,20){\line(1,1){10}}
			\put(10,20){\line(-1,1){10}}
			\put(20,30){\circle*{10}}
			\put(0,30){\circle*{10}}
			\put(14,20){$v$}
			\put(14,10){$u$}
			\put(8,14.5){$e$}
			\put(2,6){$e_1$}
			\put(15,5){$e_2$}
			\put(3,28){$f_1$}
			\put(13,28){$f_2$}
		\end{picture}
		\caption{$G$}
		\label{fig:generalG}
	\end{subfigure}
	\hfill
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\setlength{\unitlength}{1mm}
		\begin{picture}(20,30)
			\put(0,1){\circle*{10}}
			\put(0,0){\line(1,1){10}}
			\put(20,1){\circle*{10}}
			\put(20,0){\line(-1,1){10}}
			\put(10,10){\circle*{10}}
			\put(10,20){\circle*{10}}
			\put(10,20){\line(1,1){10}}
			\put(10,20){\line(-1,1){10}}
			\put(20,30){\circle*{10}}
			\put(0,30){\circle*{10}}
			\put(14,20){$v$}
			\put(14,10){$u$}
			\put(2,6){$e_1$}
			\put(15,5){$e_2$}
			\put(3,28){$f_1$}
			\put(13,28){$f_2$}
		\end{picture}
		\caption{$G_1 = G-e$}
		\label{fig:generalG-e}
	\end{subfigure}
	\hfill
	\begin{subfigure}[b]{0.3\textwidth}
		\centering
		\setlength{\unitlength}{1mm}
		\begin{picture}(20,20)
			\put(0,1){\circle*{10}}
			\put(0,1){\line(0,1){10}}
			\put(20,1){\circle*{10}}
			\put(20,1){\line(0,1){10}}
			\put(20,30){\circle*{10}}
			\put(20,30){\line(0,-1){10}}
			\put(0,30){\circle*{10}}
			\put(0,30){\line(0,-1){10}}
			\put(2,6){$e_1$}
			\put(15,6){$e_2$}
			\put(2,24){$f_1$}
			\put(15,24){$f_2$}
		\end{picture}
		\caption{$G_2 = G-e-u-v$}
		\label{fig:generalG-e-u-v}
	\end{subfigure}
	\caption{General graphs examples.}
\end{figure}

First consider the term $ \mathbb{P}\left( \alpha = 0, \beta = 0 \right) = \frac{\sum_{\alpha = \mathbf{0}, \beta = \mathbf{0}} Z_{\alpha, \beta}^{G_2}}{Z} $, it says the probability in edge coverings of $G_2$ that none of the edges $\set{e_i}$ and none of $\set{f_i}$ is chosen.

Denote $G_i^1 \triangleq G - e - u - v - \sum_{k=1}^{i-1} e_k$, and $G_i^2 \triangleq G-e-u-v - \sum_{k=1}^{d_1}e_k - \sum_{k=1}^{i-1} f_k$,
so we have

\begin{Prop}
		
	\[\mathbb{P}\left( \alpha = 0, \beta = 0 \right)= \prod_{i=1}^{d_1} P(G_i^1, e_i) \cdot \prod_{i=1}^{d_2} P(G_i^2, f_i) \]

\end{Prop}

\begin{proof}
	\begin{align*}
		\mathbb{P}\left( \alpha = 0, \beta = 0 \right) =& \mathbb{P} \left( \alpha = 0 \right) \cdot \mathbb{P}\left( \beta = 0 \mid \alpha = 0 \right) \\
		=& \mathbb{P} \left( \set{e_i} = \mathbf{0}, \set{f_i} = \mathbf{0} \right) \\
=&\prod_{i=1}^{d_1} \mathbb{P} \left( e_i = 0 \mid \set{e_j}_{j=1}^{i-1} = \mathbf{0} \right) \cdot \prod_{i=1}^{d_2} \mathbb{P} \left( f_i = 0 \mid \set{e_j}_{j=1}^{d_1} = \mathbf{0},\set{f_j}_{j=1}^{i-1} = \mathbf{0} \right) \\
=& \prod_{i=1}^{d_1} P(G_i^1, e_i) \cdot \prod_{i=1}^{d_2} P(G_i^2, f_i) 
	\end{align*}
\end{proof}

Note that $\forall i$, both $G_i^1, G_i^2$ must be dangling graphs.(FIXME \footnote{ Can we say nontrivial dangling graphs if we restrict graphs to have at least 6 vertices?})

	\section{The Correlation Decay Property}
	\subsection{Nontrivial Dangling Graphs}
	FIXME: introduce the recursion depth as a parameter into the recursion.

	\begin{Prop}
		If every $G_i$ is nontrivial dangling graphs, and $e_i$ is not completely dangling, 
		\begin{align*}
			\abs{\sum_i \cfrac{\partial P(G,e)}{\partial P(G_i,e_i)}} < 1 
		\end{align*}
	\end{Prop}

	\begin{proof}
		Denote $i^*$ be one of the indices of smallest $P(G_i, e_i)$, also note that for nontrivial dangling graphs, $P(G,e) \leq \frac{1}{2}$.
	\begin{align*}
		\abs{\sum_i \cfrac{\partial P(G,e)}{\partial P(G_i,e_i)}}  =& \cfrac{\sum_i \prod_{k \neq i} P(G_k, e_k)  }{\left( 2 - \prod_i P(G_i, e_i) \right)^2} \\
		\leq & d \prod_{k \neq i^*} P(G_k, e_k) \\
		\leq & d \left( \frac{1}{2} \right)^{d-1}
	\end{align*}

	So for $d \geq 3$ we already have $\abs{\sum_i \cfrac{\partial P(G,e)}{\partial P(G_i,e_i)}} < 1$.

	Note that $d\geq 1$ because the graph is nontrivial.
	Now first consider $d=1$, $\abs{\sum_i \cfrac{\partial P(G,e)}{\partial P(G_i,e_i)}} = \frac{1}{\left( 2 - P(G_1,e_1) \right)^2} < \frac{4}{9} $.

	Next consider $d=2$,  $\abs{\sum_i \cfrac{\partial P(G,e)}{\partial P(G_i,e_i)}} = \frac{P(G_1,e_1) + P(G_2,e_2)}{\left( 2 - P(G_1,e_1)P(G_2,e_2) \right)^2} < \frac{16}{49} $.
	\end{proof}

	\subsection{General Graphs}

	Note that the recursion for general graph is applied only once, so it's sufficient to show that the sum of the partial derivatives is bounded.

	\begin{Prop}
		\begin{align*}
			\frac{\partial \mathbb{P}\left( \alpha = 0, \beta = 0 \right) }{ \partial P(G_i^1, e_i) } \leq (\frac{1}{2})^{d_1 + d_2 -1} \\
			\frac{\partial \mathbb{P}\left( \alpha = 0, \beta = 0 \right) }{ \partial P(G_i^2, f_i) } \leq (\frac{1}{2})^{d_1 + d_2 -1} 
		\end{align*}
	\end{Prop}
	\begin{proof}
		\begin{align*}
			\frac{\partial \mathbb{P}\left( \alpha = 0, \beta = 0 \right) }{ \partial P(G_k^1, e_k) } = &\frac{\prod_{i=1}^{d_1} P(G_i^1, e_i) \cdot \prod_{i=1}^{d_2} P(G_i^2, f_i) }{\partial P(G_k^1, e_k)} \\
			=&\prod_{i=1,i\neq k}^{d_1} P(G_i^1, e_i) \cdot \prod_{i=1}^{d_2} P(G_i^2, f_i)\\
			\leq & (\frac{1}{2})^{d_1 + d_2 -1}
		\end{align*}
		Similarly for $\frac{\partial \mathbb{P}\left( \alpha = 0, \beta = 0 \right) }{ \partial P(G_i^2, f_i) }$.
	\end{proof}

	\begin{Cor}
		\[\sum_k \frac{\partial \mathbb{P}\left( \alpha = 0, \beta = 0 \right) }{ \partial P(G_k^1, e_k) } + \sum_k \frac{\partial \mathbb{P}\left( \alpha = 0, \beta = 0 \right) }{ \partial P(G_k^2, f_k) } \leq (d_1 + d_2) (\frac{1}{2})^{d_1+d_2-1}\]
	\end{Cor}

	\begin{Prop}
		\begin{align*}
			\frac{\partial \mathbb{P}\left( \alpha = 0 \right) }{ \partial P(G_i^1, e_i) } \leq (\frac{1}{2})^{d_1 -1} \\
			\frac{\partial \mathbb{P}\left( \beta = 0 \right) }{ \partial P(G_i^2, f_i) } \leq (\frac{1}{2})^{d_2 -1} 
		\end{align*}
	\end{Prop}

	\begin{Cor}
		\[ 
			\sum_i \frac{\partial \mathbb{P}\left( \alpha = 0 \right) }{ \partial P(G_i^1, e_i) } +
			\sum_i \frac{\partial \mathbb{P}\left( \beta = 0 \right) }{ \partial P(G_i^2, f_i) } \leq d_1 \left( \frac{1}{2} \right)^{d_1-1} +d_2 \left( \frac{1}{2} \right)^{d_2-1}
		\]
	\end{Cor}

\end{document}
